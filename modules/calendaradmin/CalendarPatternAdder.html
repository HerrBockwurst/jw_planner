<div id="CalendarAdmin_PatternAdder">
	<div id="CalendarAdmin_PatternAdderInner">
		<div class="headline">==calendaradmin NewPattern==</div>
		<div id="CalendarAdmin_PatternTimer">		
			<!-- From -->
			<div class="CalendarAdmin_PatternSpacer" style="margin-right: 20px;">
				<div style="font-size: 24px;">==common From==</div>
			</div>
			<div class="CalendarAdmin_PatternRow"><!-- From Time H -->
				<div>+</div>
				<div contentEditable="true" id="iCalendarAdminFromH">08</div>
				<div>-</div>
			</div>
			<div class="CalendarAdmin_PatternSpacer">
				<div>:</div>
			</div>
			<div class="CalendarAdmin_PatternRow"><!-- From Time M -->
				<div>+</div>
				<div contentEditable="true" id="iCalendarAdminFromM">00</div>
				<div>-</div>
			</div>
			<div class="CalendarAdmin_PatternSpacer" style="margin: 0px 20px;">
				<div style="font-size: 24px;">==common to==</div>
			</div>
			<!-- To -->
			<div class="CalendarAdmin_PatternRow"><!-- From Time H -->
				<div>+</div>
				<div contentEditable="true" id="iCalendarAdminToH">09</div>
				<div>-</div>
			</div>
			<div class="CalendarAdmin_PatternSpacer">
				<div>:</div>
			</div>
			<div class="CalendarAdmin_PatternRow"><!-- From Time M -->
				<div>+</div>
				<div contentEditable="true" id="iCalendarAdminToM">00</div>
				<div>-</div>
			</div>
			<div class="CalendarAdmin_PatternRow" style="margin-left: 60px;"><!-- From Time H -->
				<div style="width: 60px;">+</div>
				<div style="width: 60px;" contentEditable="true" id="iCalendarAdminCount">2</div>
				<div style="width: 60px;">-</div>
			</div>
			<div class="CalendarAdmin_PatternSpacer" style="margin-left:10px">
				<div style="font-size: 24px;">==common count==</div>
			</div>
			<br class="floatbreak" />
			<div style="margin-top: 10px;">
				<button>==calendaradmin AddPattern==</button>
				<button class="redbutton">==common back==</button>
			</div>
		</div>
	</div>
</div>
<script>
function CalendarAdmin_AddPattern() {
	var data = {
			fH : parseInt($('#iCalendarAdminFromH').text()),
			fM : parseInt($('#iCalendarAdminFromM').text()),
			tH : parseInt($('#iCalendarAdminToH').text()),
			tM : parseInt($('#iCalendarAdminToM').text()),
			count : parseInt($('#iCalendarAdminCount').text()),
			day : parseInt($('#CalendarAdmin_CurrDay').val())
	};
	
	if(	data.fM%15 != 0 ||
		data.fM > 59 ||
		data.tM%15 != 0 ||
		data.tM > 59 ||
		data.fH > 23 ||
		data.tH > 23 ||
		data.fH < 0 ||
		data.tH < 0 ||
		isNaN(data.fH) || isNaN(data.fM) || isNaN(data.tH) || isNaN(data.tM) || isNaN(data.count) || isNaN(data.day) ) {
			displayMessageBox('==errors TimeFormat==');
			return;
	}
	
	displayLoadingBox();
	
	$.post('^PROTO^^HOME^/datahandler/calendaradmin/addPattern', data, function(data) {
		hideLoadingBox();
	});
}

function CalendarAdmin_CloseOverlay() {
	$('#CalendarAdmin_PatternAdder').fadeOut();
}

$('#CalendarAdmin_PatternAdder').find('button').click(function() {
	if($(this).hasClass('redbutton')) CalendarAdmin_CloseOverlay();
	else CalendarAdmin_AddPattern();
})
</script>