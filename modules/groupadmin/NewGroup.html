<div id="GroupAdmin_NewOverlay">
	<div id="GroupAdmin_NewOverlayInner">
		<div class="headline">==groupadmin NewGroup==</div>
		<label style="margin-bottom: 20px;">
			==groupadmin NewGroupName==
			<input type="text" id="iNewGroupName" />			
		</label>
		<div style="text-align: center">
			<button>==groupadmin SaveGroup==</button>
			<button class="redbutton">==common close==</button>
		</div>
	</div>
</div>
<script>

function addGroup() {
	var GroupName = $('#iNewGroupName').val();
	
	if(!/\S/.test(GroupName)) {
		displayMessageBox('==errors WrongFields==');
		return;
	}
	
	displayLoadingBox();
	$.post('^PROTO^^HOME^/datahandler/groupadmin/addGroup', {groupname: GroupName, vsid: $('#GroupAdmin_VSSelector').val()}, function(data) {
		testRedirect(data);
		if(!testJSON(data)) {
			closeGroupOverlay();
			updateGroupList();
			displayMessageBox('==errors formSubmit==', false);
			return;
		}
		if(testError(data, true, false)) {
			closeGroupOverlay();
			return;
		}
		
		$('#iNewGroupName').val('');
		closeGroupOverlay();
		updateGroupList();
	});
}

function closeGroupOverlay() {
	$('#GroupAdmin_NewOverlay').fadeOut(100);
}

$('#GroupAdmin_NewOverlayInner').find('button').click(function() {
	if($(this).hasClass('redbutton')) closeGroupOverlay();
	else addGroup();	
});
</script>